<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Math Tables â€” Multiplication & Division</title>
<link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="32x32">
<link rel="icon" type="image/png" href="assets/img/favicon.png" sizes="16x16">
<link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon.png">
<style>
  :root{
    --max-width:1200px;
    --card-radius:12px;
  }
  body {
    font-family: Arial, sans-serif;
    background: #f0f8ff;
    margin: 0;
    padding: 20px;
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }
  header {
    max-width: var(--max-width);
    margin: 0 auto 16px;
    display:flex;
    flex-direction:column;
    gap:12px;
    align-items:center;
  }
  h1 {
    margin: 0;
    text-align: center;
    font-size: 22px;
  }
  .tabs {
    display: flex;
    gap: 8px;
    align-items: center;
  }
  .tab-btn {
    padding: 10px 18px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    font-weight: 700;
    background: #d0e4ff;
    color: #18385f;
    transition: background .18s;
  }
  .tab-btn.active {
    background: #4D96FF;
    color: #fff;
  }
  .controls {
    width:100%;
    max-width: var(--max-width);
    margin: 0 auto 18px;
    display:flex;
    justify-content:flex-start;
    align-items:center;
  }
  #resetAll {
    padding: 10px 18px;
    font-size: 16px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background:#fff;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08);
    font-weight:700;
  }
  .tables-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 20px;
    max-width: var(--max-width);
    margin: 0 auto 40px;
    opacity: 1;
    transition: opacity 260ms ease;
  }
  .fade-in {
    opacity: 0;
  }
  .table-column {
    border-radius: var(--card-radius);
    padding: 14px;
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.08);
  }
  .table-column h2 { margin: 6px 0 12px; text-align:center; font-size:18px; }
  .example {
    margin: 6px 0;
    font-size: 17px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    white-space: nowrap;
  }
  input {
    width: 56px;
    text-align: center;
    font-size: 16px;
    border-radius: 6px;
    border: 1px solid #ccc;
    padding: 6px 4px;
    transition: background .12s, border-color .12s;
  }
  input.correct {
    background-color: #c8f7c5 !important;
    border-color: #4CAF50 !important;
    color: #000 !important;
  }
  input:invalid { box-shadow: none !important; }
  button.reset-btn {
    margin-top: 10px;
    padding: 8px 12px;
    border-radius: 8px;
    border: none;
    font-size: 15px;
    cursor: pointer;
    background-color: #fff;
    color: #333;
    font-weight: 700;
  }
  button.reset-btn:hover { background-color: #f0f0f0; }
  .message-overlay {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%,-50%);
    display: none;
    z-index: 1200;
    pointer-events: none;
  }
  .message-content {
    pointer-events: auto;
    background: rgba(255,255,255,0.88);
    backdrop-filter: blur(6px);
    border: 2px solid #ffd700;
    padding: 18px 28px;
    border-radius: 12px;
    font-size: 22px;
    text-align: center;
    display:flex;
    align-items:center;
    gap:12px;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
  }
  @media (max-width: 992px) { .tables-container { grid-template-columns: repeat(2, 1fr); } }
  @media (max-width: 600px) { .tables-container { grid-template-columns: 1fr; } input { width: 50px; } .message-content { font-size: 20px; padding: 14px 18px; gap:8px; } }
</style>
</head>
<body>

<header>
  <h1 id="pageTitle">âœ– Multiplication</h1>
  <div class="tabs" role="tablist">
    <button id="btnMul" class="tab-btn active" role="tab" aria-selected="true">âœ– Multiplication</button>
    <button id="btnDiv" class="tab-btn" role="tab" aria-selected="false">Ã· Division</button>
  </div>
</header>

<div class="controls">
  <button id="resetAll">Clear all tables</button>
</div>

<main>
  <div class="tables-container" id="tablesContainer" aria-live="polite"></div>
</main>

<div class="message-overlay" id="messageOverlay">
  <div class="message-content" id="messageContent" role="status" aria-live="assertive"></div>
</div>

<audio id="correctSound" src="assets/audio/correctSound.mp3" preload="auto"></audio>

<script>
const tableColors = ['#FF6B6B','#6BCB77','#4D96FF','#FFD93D','#FF6EC7','#8E44AD','#1ABC9C','#FF8C42','#3498DB','#E67E22','#2ECC71','#E74C3C'];
const maxMultiplier = 12;
const tableNumbers = Array.from({length:12},(_,i)=>i+1);
let mode = 'multiplication';
let audioUnlocked = false;

const tablesContainer = document.getElementById('tablesContainer');
const messageOverlay = document.getElementById('messageOverlay');
const messageContent = document.getElementById('messageContent');
const sound = document.getElementById('correctSound');
const pageTitle = document.getElementById('pageTitle');
const btnMul = document.getElementById('btnMul');
const btnDiv = document.getElementById('btnDiv');
const resetAllBtn = document.getElementById('resetAll');

// Unlock audio on first user interaction
document.addEventListener('click', () => {
  if(!audioUnlocked){
    sound.play().then(()=>sound.pause()).catch(()=>{});
    sound.currentTime=0;
    audioUnlocked=true;
  }
},{once:true});

function showMessage(text, correct=true){
  messageContent.textContent = correct?`${text} ðŸŽ‰`:text;
  messageOverlay.style.display='block';
  setTimeout(()=>{ messageOverlay.style.display='none'; },1500);
}

function createTables(animated=true){
  if(animated){
    tablesContainer.classList.add('fade-in');
    requestAnimationFrame(()=>{ buildTables(); requestAnimationFrame(()=>tablesContainer.classList.remove('fade-in')); });
  } else { buildTables(); }
}

function buildTables(){
  tablesContainer.innerHTML='';
  tableNumbers.forEach((num,index)=>{
    const tableDiv=document.createElement('section');
    tableDiv.className='table-column';
    tableDiv.style.backgroundColor=tableColors[index % tableColors.length];
    const title=document.createElement('h2');
    title.textContent=mode==='multiplication'?`Multiplication table by ${num}`:`Division table by ${num}`;
    tableDiv.appendChild(title);

    if(mode==='multiplication'){
      for(let i=0;i<=maxMultiplier;i++){
        const exampleDiv=document.createElement('div');
        exampleDiv.className='example';
        exampleDiv.innerHTML=`${i} Ã— ${num} = <input type="text" inputmode="numeric" pattern="[0-9]*" data-correct="${i*num}" maxlength="3" placeholder="?">`;
        tableDiv.appendChild(exampleDiv);
      }
    } else {
      for(let i=1;i<=maxMultiplier;i++){
        const dividend=i*num;
        const exampleDiv=document.createElement('div');
        exampleDiv.className='example';
        exampleDiv.innerHTML=`${dividend} Ã· ${num} = <input type="text" inputmode="numeric" pattern="[0-9]*" data-correct="${i}" maxlength="3" placeholder="?">`;
        tableDiv.appendChild(exampleDiv);
      }
    }

    const resetBtn=document.createElement('button');
    resetBtn.className='reset-btn';
    resetBtn.type='button';
    resetBtn.textContent='Clear table';
    resetBtn.addEventListener('click',()=>resetTable(tableDiv));
    tableDiv.appendChild(resetBtn);

    tablesContainer.appendChild(tableDiv);
  });

  attachInputHandlers();
}

function attachInputHandlers(){
  const inputs=tablesContainer.querySelectorAll('input');
  inputs.forEach(input=>{
    input.addEventListener('input',onInputHandler);
    input.addEventListener('keydown',(e)=>{ if(e.key==='Enter') input.blur(); });
  });
}

function onInputHandler(e){
  const input=e.target;
  input.value=input.value.replace(/\D/g,'');
  const correctStr=input.dataset.correct;
  if(!correctStr) return;
  const correct=parseInt(correctStr,10);
  const value=input.value.trim();
  const correctLen=String(correct).length;
  if(value.length===correctLen){
    const numeric=parseInt(value,10);
    if(numeric===correct){
      input.classList.add('correct');
      input.readOnly=true;
      showMessage('Well done!',true);
      try{ sound.pause(); sound.currentTime=0; sound.play(); }catch{}
    } else {
      input.style.backgroundColor='#f8d7da';
      setTimeout(()=>{ input.value=''; input.style.backgroundColor=''; input.focus(); },120);
      showMessage('Try again',false);
    }
  } else { input.style.backgroundColor=''; }
}

function resetTable(tableDiv){
  const inputs=tableDiv.querySelectorAll('input');
  inputs.forEach(inp=>{
    inp.value='';
    inp.readOnly=false;
    inp.classList.remove('correct');
    inp.style.backgroundColor='';
  });
}

resetAllBtn.addEventListener('click',()=>{
  const allTables=document.querySelectorAll('.table-column');
  allTables.forEach(tbl=>resetTable(tbl));
});

/* Tabs */
btnMul.addEventListener('click',()=>{
  if(mode==='multiplication') return;
  mode='multiplication';
  pageTitle.textContent='âœ– Multiplication';
  btnMul.classList.add('active');
  btnDiv.classList.remove('active');
  btnMul.setAttribute('aria-selected','true');
  btnDiv.setAttribute('aria-selected','false');
  createTables(true);
});

btnDiv.addEventListener('click',()=>{
  if(mode==='division') return;
  mode='division';
  pageTitle.textContent='Ã· Division';
  btnDiv.classList.add('active');
  btnMul.classList.remove('active');
  btnDiv.setAttribute('aria-selected','true');
  btnMul.setAttribute('aria-selected','false');
  createTables(true);
});

createTables(false);
</script>

</body>
</html>

